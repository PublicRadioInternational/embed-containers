!function(e,t,n,o){"use strict";function i(n,o){var i=this;i.el=n,i.$el=e(n),i.templates=t.MediumInsert.Templates,i.core=i.$el.data("plugin_"+s),i.options=e.extend(!0,{},c,o),i._defaults=c,i._name=s,i.init()}var s="mediumInsert",a="EntityEmbed",c={$modalEl:e(""),modalOptions:{functions:{init:{before:function(t){t.contents={embedView:null,embedType:null,embedModel:null},t.functions={setInitialModalView:function(t){var n=e("#select-embed-type").children("option"),o=e(""),i="";n[0]&&(i=n[0].value,o=e("#"+i));for(var s=1;s<n.length;s++)n[s].value&&e("#"+n[s].value).hide();t.contents.embedView=o,t.contents.embedType=i},clearForm:function(e){for(var t=e.find(".form-control"),n=0;n<t.length;n++)-1!==t[n].type.indexOf("select")?t[n].selectedIndex=0:t[n].value=null},getModelFromForm:function(e){for(var t={},n=e.find(".form-control"),o=0;o<n.length;o++){var i=n[o].name,s=n[o].value;i&&s&&(t[i]=s)}return t}}},after:function(t){e("#select-embed-type").change(function(n){t.contents.embedView&&t.contents.embedView.hide(),t.contents.embedType=n.currentTarget.options[n.currentTarget.selectedIndex],t.contents.embedView=e("#"+t.contents.embedType),t.contents.embedView.show()})}},complete:{before:function(e){return e.contents.embedModel=e.functions.getModelFromForm(e.contents.embedView),e.contents.embedModel.embedType=e.contents.embedType,!0},after:function(t){e(".medium-insert-active").html("<pre>"+JSON.stringify(t.contents.embedModel)+"</pre>"),t.functions.clearForm(t.contents.embedView)}},abort:{before:function(e){},after:function(e){e.functions.clearForm(e.embedView)}},open:{before:function(e){e.functions.setInitialModalView(e)},after:function(e){}}}},insertBtn:".medium-insert-buttons",deleteMethod:"POST",deleteScript:"delete.php",preview:!0,captions:!0,fileUploadOptions:{url:"upload.php",acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i},styles:{wide:{label:'<span class="fa fa-align-justify"></span>'},left:{label:'<span class="fa fa-align-left"></span>'},right:{label:'<span class="fa fa-align-right"></span>'},grid:{label:'<span class="fa fa-th"></span>'}}};i.prototype.init=function(){var e=this;e.events(),e.options.$modalEl.modal(e.options.modalOptions)},i.prototype.events=function(){var t=this;e(n).ready(function(){e(t.options.insertBtn).click(function(){t.add()})})},i.prototype.getCore=function(){return this.core},i.prototype.add=function(){var e=this;e.options.$modalEl.openModal()},e.fn[s+a]=function(t){return this.each(function(){e.data(this,"plugin_"+s+a)||e.data(this,"plugin_"+s+a,new i(this,t))})}}(jQuery,window,document),function(){"use strict";function e(e,n,o){var i=this;i.$el=$(e),i.options=$.extend(!0,{},t,n),i.scope={},o&&(i.scope=o),i.scope.modal=i.$el,i.$el.data("scope",i.scope),i.options.functions.init.before(i.scope),i.init(),i.options.functions.init.after(i.scope)}var t={contentClass:"embed-modal",backdropClass:"embed-modal-backdrop",closeBtnIcon:"fa fa-times",showCloseBtn:!0,$openEl:$(""),$abortEl:$(""),$completeEl:$(""),functions:{init:{before:function(e){},after:function(e){}},open:{before:function(e){},after:function(e){}},abort:{before:function(e){},after:function(e){}},complete:{before:function(e){return!0},after:function(e){}}}};e.prototype.isActive=!1,e.prototype.activeClass="em-active",e.prototype.closeBtnClass="em-close-btn",e.prototype.generateId=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.prototype.backdropHtml=function(e){var t=this;return'<div id="'+e+'" class="'+t.options.backdropClass+'"></div>'},e.prototype.closeBtnHtml=function(){var e=this,t=e.closeBtnClass+" "+e.options.closeBtnIcon;return'<i class="'+t+'"></i>'},e.prototype.toggle=function(e){e.$el.toggleClass(e.activeClass),e.$backdrop.toggleClass(e.activeClass),e.$closeBtn.toggleClass(e.activeClass),e.isActive=!e.isActive},e.prototype.init=function(){var e=this;e.$el.addClass(e.options.contentClass);var t=e.generateId();e.$el.before(e.backdropHtml(t)),e.$backdrop=$("#"+t),e.$backdrop.click(function(){e.$el.abortModal()}),e.options.showCloseBtn&&(e.$el.after(e.closeBtnHtml()),e.$closeBtn=$("."+e.closeBtnClass),e.$closeBtn.click(function(){e.$el.abortModal()})),e.options.$openEl.click(function(){e.$el.openModal()}),e.options.$completeEl.click(function(){e.$el.completeModal()}),e.options.$abortEl.click(function(){e.$el.abortModal()})},$.fn.modal=function(t,n){return this.each(function(){$.data(this,"ctrl")||(t||(t={}),$.data(this,"ctrl",new e(this,t,n)))})},$.fn.openModal=function(){return this.each(function(){var e=$.data(this,"ctrl");e&&!e.isActive&&(e.options.functions.open.before(e.$el.data("scope")),e.toggle(e),e.options.functions.open.after(e.$el.data("scope")))})},$.fn.abortModal=function(){return this.each(function(){var e=$.data(this,"ctrl");e&&e.isActive&&(e.options.functions.abort.before(e.$el.data("scope")),e.toggle(e),e.options.functions.abort.after(e.$el.data("scope")))})},$.fn.completeModal=function(){return this.each(function(){var e=$.data(this,"ctrl");e&&e.isActive&&e.options.functions.complete.before(e.$el.data("scope"))&&(e.toggle(e),e.options.functions.complete.after(e.$el.data("scope")))})}}();